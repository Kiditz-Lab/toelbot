import{y as b,O as M,N as v,a1 as H,ad as L,c as f,o as n,a5 as N,w as a,a as e,a7 as S,d as r,a8 as m,_ as u,B as s,t as C,E as V,aa as A,q as p,u as E,s as I,ab as K,U as R,X as j,$ as z,f as D,ae as U,V as _,b as g,j as w,k as F,e as O}from"./index-B-4Jq8Ft.js";import{a as $,b as q,c as P,d as X}from"./mdi-CCnSVLV7.js";import{u as G,m as J}from"./marked.esm-Bdw01dbk.js";import{u as Q}from"./agentStore-BHR6fR2_.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useApi-Bby6fr-m.js";import"./snackbarStore-KsQP317g.js";const Y=["innerHTML"],Z={key:0,class:"typing-dots"},ee=b({__name:"ChatCard",setup(k){const{agent:h}=M(Q()),l=G(),o=v(""),i=v(null),T=d=>{!d.shiftKey&&o.value.trim()&&y()},y=async()=>{if(o.value.trim())try{await l.sendMessage(o.value),o.value="",x()}catch(d){console.error("Error sending message:",d)}},x=()=>{U(()=>{i.value&&(i.value.scrollTop=i.value.scrollHeight)})};return H(()=>{l.clearChat(),l.messages.length===0&&l.addMessage({sender:"bot",text:"Hi, How can I help you today?",timestamp:new Date,loading:!1}),x()}),L(()=>{}),(d,c)=>(n(),f(N,{class:"px-4 d-flex flex-column",rounded:"lg",style:{height:"86vh"}},{default:a(()=>[e(S,{class:"d-flex align-center"},{default:a(()=>{var t;return[e(m,{size:"40",class:"mr-3"},{default:a(()=>[e(u,{icon:s($)},null,8,["icon"])]),_:1}),r("span",null,C((t=s(h))==null?void 0:t.name),1)]}),_:1}),e(V),e(A,{ref_key:"chatContainer",ref:i,class:"chat-container flex-grow-1 overflow-auto"},{default:a(()=>[(n(!0),p(I,null,E(s(l).messages,(t,B)=>(n(),p("div",{key:B},[t.sender==="bot"?(n(),f(_,{key:0},{default:a(()=>[e(g,{cols:"12",class:"d-flex justify-start align-start"},{default:a(()=>[e(m,{size:"40",class:"mr-3"},{default:a(()=>[e(u,{color:"primary",icon:s(P)},null,8,["icon"])]),_:1}),e(w,{color:"grey-lighten-4","text-color":"black",class:"chat-message",variant:"flat"},{default:a(()=>[r("span",{innerHTML:s(J)(t.text)},null,8,Y),t.loading?(n(),p("div",Z,c[1]||(c[1]=[r("span",{class:"dot"},null,-1),r("span",{class:"dot"},null,-1),r("span",{class:"dot"},null,-1)]))):F("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):(n(),f(_,{key:1},{default:a(()=>[e(g,{cols:"12",class:"d-flex justify-end"},{default:a(()=>[e(w,{color:"primary","text-color":"white",class:"chat-message"},{default:a(()=>[O(C(t.text),1)]),_:2},1024),e(m,{size:"40",class:"ml-3"},{default:a(()=>[e(u,{icon:s(X)},null,8,["icon"])]),_:1})]),_:2},1024)]),_:2},1024))]))),128))]),_:1},512),e(V),e(K,{class:"d-flex align-center"},{default:a(()=>[e(R,{variant:"outlined","bg-color":"grey-lighten-4",modelValue:o.value,"onUpdate:modelValue":c[0]||(c[0]=t=>o.value=t),density:"default","hide-details":"",placeholder:"Type your message...",disabled:s(l).isLoading,class:"flex-grow-1 custom-text-field",style:{height:"40px"},onKeydown:j(z(T,["prevent"]),["enter"])},null,8,["modelValue","disabled","onKeydown"]),e(D,{color:"primary",style:{height:"40px","min-width":"48px"},onClick:y,loading:s(l).isLoading,disabled:!o.value,variant:"tonal"},{default:a(()=>[e(u,{icon:s(q)},null,8,["icon"])]),_:1},8,["loading","disabled"])]),_:1})]),_:1}))}}),ae=W(ee,[["__scopeId","data-v-28a10ad1"]]),de=b({__name:"ChatPage",setup(k){return(h,l)=>(n(),f(_,null,{default:a(()=>[e(g,{cols:"12",md:"12"},{default:a(()=>[e(ae)]),_:1})]),_:1}))}});export{de as default};
