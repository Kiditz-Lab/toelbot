import{y as k,O as M,N as y,a1 as H,ad as L,q as u,a as e,w as a,a5 as N,s as x,ae as S,o as n,a7 as A,d as r,a8 as f,_ as m,B as s,t as v,E as V,aa as I,u as K,ab as R,U as j,X as z,$ as D,f as U,c as p,V as C,b,j as w,k as $,e as F}from"./index-B-4Jq8Ft.js";import{a as O,b as q,c as P,d as X}from"./mdi-CCnSVLV7.js";import{u as G,m as J}from"./marked.esm-Bdw01dbk.js";import{u as Q}from"./agentStore-BHR6fR2_.js";import{_ as W}from"./SnackBar.vue_vue_type_script_setup_true_lang-2qCf1Qpj.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useApi-Bby6fr-m.js";import"./snackbarStore-KsQP317g.js";const Z=["innerHTML"],ee={key:0,class:"typing-dots"},ae=k({__name:"EmbededChat",setup(T){const{agent:_}=M(Q()),l=G(),o=y(""),i=y(null),B=d=>{!d.shiftKey&&o.value.trim()&&g()},g=async()=>{if(o.value.trim())try{await l.sendMessage(o.value),o.value="",h()}catch(d){console.error("Error sending message:",d)}},h=()=>{S(()=>{i.value&&(i.value.scrollTop=i.value.scrollHeight)})};return H(()=>{l.addMessage({sender:"bot",text:"Hi, How can I help you today?",timestamp:new Date,loading:!1}),h()}),L(()=>{l.clearChat()}),(d,c)=>(n(),u(x,null,[e(N,{class:"px-4 d-flex flex-column",rounded:"0",variant:"flat",height:"100vh"},{default:a(()=>[e(A,{class:"d-flex align-center"},{default:a(()=>{var t;return[e(f,{size:"40",class:"mr-3"},{default:a(()=>[e(m,{icon:s(O)},null,8,["icon"])]),_:1}),r("span",null,v((t=s(_))==null?void 0:t.name),1)]}),_:1}),e(V),e(I,{ref_key:"chatContainer",ref:i,class:"chat-container flex-grow-1 overflow-auto"},{default:a(()=>[(n(!0),u(x,null,K(s(l).messages,(t,E)=>(n(),u("div",{key:E},[t.sender==="bot"?(n(),p(C,{key:0},{default:a(()=>[e(b,{cols:"12",class:"d-flex justify-start align-start"},{default:a(()=>[e(f,{size:"40",class:"mr-3"},{default:a(()=>[e(m,{color:"primary",icon:s(P)},null,8,["icon"])]),_:1}),e(w,{color:"primary","text-color":"white",class:"chat-message"},{default:a(()=>[r("span",{innerHTML:s(J)(t.text)},null,8,Z),t.loading?(n(),u("div",ee,c[1]||(c[1]=[r("span",{class:"dot"},null,-1),r("span",{class:"dot"},null,-1),r("span",{class:"dot"},null,-1)]))):$("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):(n(),p(C,{key:1},{default:a(()=>[e(b,{cols:"12",class:"d-flex justify-end"},{default:a(()=>[e(w,{color:"grey lighten-2","text-color":"black",class:"chat-message"},{default:a(()=>[F(v(t.text),1)]),_:2},1024),e(f,{size:"40",class:"ml-3"},{default:a(()=>[e(m,{icon:s(X)},null,8,["icon"])]),_:1})]),_:2},1024)]),_:2},1024))]))),128))]),_:1},512),e(V),e(R,{class:"d-flex align-center"},{default:a(()=>[e(j,{variant:"outlined","bg-color":"grey-lighten-4",modelValue:o.value,"onUpdate:modelValue":c[0]||(c[0]=t=>o.value=t),density:"default","hide-details":"",placeholder:"Type your message...",disabled:s(l).isLoading,class:"flex-grow-1 custom-text-field",style:{height:"40px"},onKeydown:z(D(B,["prevent"]),["enter"])},null,8,["modelValue","disabled","onKeydown"]),e(U,{color:"primary",style:{height:"40px","min-width":"48px"},onClick:g,loading:s(l).isLoading,disabled:!o.value,variant:"tonal"},{default:a(()=>[e(m,{icon:s(q)},null,8,["icon"])]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),e(W)],64))}}),te=Y(ae,[["__scopeId","data-v-ec087460"]]),ue=k({__name:"EmbedPage",setup(T){return(_,l)=>(n(),p(te))}});export{ue as default};
